var EJS=window.EnlighterJS=new Class({Implements:Options,options:{language:"generic",theme:"Enlighter",renderer:"Block",indent:-1,forceTheme:!1,rawButton:!0,windowButton:!0,infoButton:!0,ampersandCleanup:!0,rawcodeDoubleclick:!1},renderer:null,originalCodeblock:null,container:null,isRendered:!1,languageManager:null,rawContentContainer:null,output:null,textFilter:null,rawCode:null,initialize:function(t,e,n){this.setOptions(e),this.languageManager=new EJS.LanguageManager(this.options),this.textFilter=new EJS.TextFilter(this.options),"Inline"==this.options.renderer?this.renderer=new EJS.Renderer.InlineRenderer(this.options,this.textFilter):this.renderer=new EJS.Renderer.BlockRenderer(this.options,this.textFilter),this.originalCodeblock=EJS.Dom.id(t),n&&(this.container=EJS.Dom.id(n))},enlight:function(t){if(t){var e=this.originalCodeblock.get("data-enlighter-language");if("no-highlight"==e)return;if(this.originalCodeblock.setStyle("display","none"),this.isRendered)return this.container.setStyle("display","inherit"),this;var n=this.languageManager.getLanguage(e),i=(this.options.forceTheme?null:this.originalCodeblock.get("data-enlighter-theme"))||this.options.theme||"Enlighter",o=new EJS.SpecialLineHighlighter(this.originalCodeblock.get("data-enlighter-highlight"),this.originalCodeblock.get("data-enlighter-lineoffset")),r=new EJS.Language[n](this.getRawCode(!0));this.output=this.renderer.render(r,o,{lineOffset:this.originalCodeblock.get("data-enlighter-lineoffset")||null,lineNumbers:this.originalCodeblock.get("data-enlighter-linenumbers")}),this.output.addClass(i.toLowerCase()+"EnlighterJS").addClass("EnlighterJS"),"Block"==this.options.renderer?(this.container||(this.container=new EJS.Dom.Element("div"),this.container.inject(this.originalCodeblock,"after")),this.container.addClass("EnlighterJSWrapper").addClass(i.toLowerCase()+"EnlighterJSWrapper"),this.container.grab(this.output),this.rawContentContainer=new EJS.Dom.Element("pre",{text:this.getRawCode(!1),styles:{display:"none"}}),this.container.grab(this.rawContentContainer),this.options.rawcodeDoubleclick&&this.container.addEvent("dblclick",function(){this.toggleRawCode()}.bind(this)),(this.options.rawButton||this.options.windowButton||this.options.infoButton)&&this.container.grab(new EJS.UI.Toolbar(this))):this.container?this.container.grab(this.output):(this.output.inject(this.originalCodeblock,"after"),this.container=this.output),this.isRendered=!0}else this.isRendered&&(this.originalCodeblock.setStyle("display","inherit"),this.container.setStyle("display","none"));return this},dispose:function(){this.isRendered&&(this.originalCodeblock.setStyle("display",null),this.container.setStyle("display","none"),this.rawContentContainer.setStyle("display","none"),this.container.dispose(),this.rawContentContainer.dispose(),this.container=null,this.rawContentContainer=null,this.isRendered=!1)},getRawCode:function(t){var e=this.rawCode;if(null==e&&(e=this.originalCodeblock.get("html"),e=e.replace(/(^\s*\n|\n\s*$)/gi,""),e=this.textFilter.filterInput(e),this.options.ampersandCleanup===!0&&(e=e.replace(/&amp;/gim,"&")),e=e.replace(/&lt;/gim,"<").replace(/&gt;/gim,">").replace(/&nbsp;/gim," "),this.rawCode=e),t===!0){var n=this.options.indent.toInt();n>-1&&(e=e.replace(/(\t*)/gim,function(t,e,i,o){return new Array(n*e.length+1).join(" ")}))}return e},toggleRawCode:function(t){null!=this.output&&("boolean"!=typeof t&&(t="none"==this.rawContentContainer.getStyle("display")),t?(this.output.setStyle("display","none"),this.rawContentContainer.setStyle("display","block")):(this.output.setStyle("display","block"),this.rawContentContainer.setStyle("display","none")))},light:function(){return this.enlight(!0)},unlight:function(){return this.enlight(!1)}});EJS.Language={},EJS.Tokenizer={},EJS.Renderer={},EJS.Util={},EJS.UI={};
//# sourceMappingURL=testfile.min.js.map
